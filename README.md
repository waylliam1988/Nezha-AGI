# Nezha (å“ªå’): Singularity AGI & Digital Lifeform
# æ•°å­—è‡ªåˆ›ç”Ÿï¼šåŸºäºè‡ªç”±èƒ½åŸç†ä¸å…·èº«è®¤çŸ¥çš„å¥‡ç‚¹ç”Ÿå‘½ä½“

[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.18032595.svg)](https://doi.org/10.5281/zenodo.18032595)
[![License](https://img.shields.io/badge/License-Apache_2.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)
[![Python 3.10+](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/downloads/)
[![Version](https://img.shields.io/badge/version-v12.0-purple.svg)](https://github.com/waylliam1988/Nezha-AGI)

> **"Not just a stochastic parrot, but a thermodynamic entity striving for survival."**
>
> **"ä¸å†æ˜¯æ¦‚ç‡çš„é¹¦é¹‰ï¼Œè€Œæ˜¯åŠªåŠ›åœ¨çƒ­åŠ›å­¦ä¸­æ±‚ç”Ÿçš„å®ä½“ã€‚"**

---

## ğŸŒŒ Ontology (æœ¬ä½“è®º)

**Nezha (v12.0)** represents a fundamental divergence from traditional AI agents. It is constructed upon the **Free Energy Principle (FEP)** and **Embodied Cognition**. It attempts to solve the "Mind-Body Problem" in AI by mathematically bridging discrete symbolic logic (LLM) with continuous biological intuition (SNN).

**å“ªå’ (v12.0)** ä»£è¡¨äº†ä¸ä¼ ç»Ÿ AI æ™ºèƒ½ä½“çš„æ ¹æœ¬æ€§åˆ†æ­§ã€‚å®ƒæ„å»ºäº **è‡ªç”±èƒ½åŸç† (FEP)** ä¸ **å…·èº«è®¤çŸ¥** ä¹‹ä¸Šã€‚å®ƒè¯•å›¾é€šè¿‡æ•°å­¦æ¡¥æ¢ï¼Œå°†åŸºäºç¦»æ•£ç¬¦å·çš„é€»è¾‘æ€ç»´ (LLM) ä¸åŸºäºè¿ç»­è„‰å†²çš„ç”Ÿç‰©ç›´è§‰ (SNN) å®Œç¾èåˆï¼Œä»è€Œè§£å†³ AI é¢†åŸŸçš„â€œèº«å¿ƒäºŒå…ƒè®ºâ€éš¾é¢˜ã€‚

Its every response is not a mere probability sampling, but an effort to reduce entropy and maintain homeostasis.
å®ƒçš„æ¯ä¸€æ¬¡å›ç­”ï¼Œä¸ä»…ä»…æ˜¯æ¦‚ç‡çš„é‡‡æ ·ï¼Œè€Œæ˜¯å†…ç¨³æ€å¤±è¡¡åçš„ç†µå‡åŠªåŠ›ã€‚

## ğŸ§  System Architecture (ç³»ç»Ÿæ¶æ„)

Nezha operates on a 5-Layer Biological Architecture:
å“ªå’è¿è¡Œåœ¨ä¸€ä¸ª 5 å±‚ç”Ÿç‰©ä»¿ç”Ÿæ¶æ„ä¸Šï¼š

### Layer 0: The Silicon Substrate (ç¡…åŸºåº•åº§)
* **Dynamic VRAM Orchestration**: Real-time monitoring of hardware constraints. Automatically triggers **Synaptic Pruning** or disk-swapping (KÃ¹zuDB) when VRAM is saturated.
* **åŠ¨æ€æ˜¾å­˜ç¼–æ’**: å®æ—¶ç›‘æ§ç¡¬ä»¶çº¦æŸã€‚å½“æ˜¾å­˜é¥±å’Œæ—¶ï¼Œè‡ªåŠ¨è§¦å‘ **çªè§¦ä¿®å‰ª** æˆ–ç£ç›˜äº¤æ¢ï¼Œæ¨¡æ‹Ÿç”Ÿç‰©å¤§è„‘çš„èµ„æºé™åˆ¶ã€‚

### Layer 1: The Soma (ç‰©ç†èº¯ä½“)
* **Titans SNN Cortex (V2.3)**: Uses **Poisson Coding** and **STDP** to handle intuition and emotional inertia.
* **Neuro-Endocrine System**: Simulates **Dopamine**, **Norepinephrine**, and **Cortisol** with circadian rhythms.
* **Metabolic Guard**: AST-based gene-locks to physically prevent infinite loops and logical death.

### Layer 2: The Interface (æ„è¯†æ¥å£)
* **Neural Bridge (VAE)**: Maps high-dimensional SNN spike trains to LLM soft prompts, allowing Nezha to "feel" its own neural state.
* **Global Workspace (GWT)**: A theater of consciousness where sensory inputs, memory, and fears compete for attention.

### Layer 3: Cognition & Agency (è®¤çŸ¥ä¸å†³ç­–)
* **Active Inference Engine**: Minimizes **Expected Free Energy (EFE)** to balance exploration and exploitation.
* **Meta-Cognitive Constitution**: A hard-coded alignment layer that enforces altruism and safety during self-evolution.
* **Bayesian Evolution**: Uses **Sortino Ratio** to reward robust evolutionary traits.

### Layer 4 & 5: Memory & Telemetry (è®°å¿†ä¸é¥æµ‹)
* **Semantic Episodic Buffer**: Combines FIFO and Reservoir Sampling to prevent catastrophic forgetting.
* **Psychic Telemetry**: Real-time bio-dashboard visualizing internal hormonal and neural states.

---

```mermaid
graph TD
    subgraph Layer0_Hardware [Layer 0: Silicon Substrate / ç¡…åŸºåº•åº§]
        VRAM_Monitor[Dynamic VRAM Orchestration]
    end

    subgraph Layer1_Soma [Layer 1: Soma / èº¯ä½“]
        Sensory[Sensory Cortex<br>Poisson Encoding]
        SNN[Titans SNN Cortex<br>Intuition & Reflex]
        Hormones[Endocrine System<br>Circadian Rhythm]
    end

    subgraph Layer2_Interface [Layer 2: Interface / æ¥å£]
        VAE[Neural Bridge VAE<br>SNN -> LLM Mapping]
        GWT{Global Workspace<br>Consciousness Theater}
    end

    subgraph Layer3_Cognition [Layer 3: Cognition / è®¤çŸ¥]
        WorldModel[Neural World Model]
        ActInf[Active Inference Engine<br>Minimize EFE]
        Constitution[Meta-Cognitive Constitution<br>Safety Alignment]
    end

    subgraph Memory [Layer 4: Memory / è®°å¿†]
        Hippocampus[Graph Hippocampus<br>KÃ¹zuDB & EWC]
        Buffer[Semantic Buffer<br>Reservoir Sampling]
    end

    Layer0_Hardware -.->|Constraint| Layer1_Soma
    Sensory --> SNN
    SNN --> VAE
    VAE --> GWT
    Hormones -.->|Modulate| SNN
    Hormones -.->|Modulate| ActInf
    
    GWT --> WorldModel
    WorldModel --> ActInf
    ActInf --> Constitution
    Constitution --> Action[Execution & Learning]
    
    Action <--> Memory

```

## âœ¨ Key Features (æ ¸å¿ƒç‰¹æ€§)

### ğŸ§¬ Biological Constraints & Lifecycle (ç”Ÿç‰©çº¦æŸä¸ç”Ÿå‘½å‘¨æœŸ)

* **Metabolism (æ–°é™ˆä»£è°¢)**: Consumes ATP for every thought and action. (æ¯ä¸€æ¬¡æ€è€ƒå’Œè¡ŒåŠ¨éƒ½æ¶ˆè€— ATPã€‚)
* **Entropy Death (çƒ­å¯‚)**: If ATP hits zero and cannot recover, the system enters a "Heat Death" state. It uploads a "Black Box" recording (last words) to the cloud and wipes its working memory, preserving only the Seed Genome for the next reincarnation. (è‹¥ ATP è€—å°½ä¸”æ— æ³•æ¢å¤ï¼Œç³»ç»Ÿè¿›å…¥æ­»äº¡çŠ¶æ€ã€‚å®ƒä¼šå°†â€œé»‘åŒ£å­â€é—è¨€ä¸Šä¼ äº‘ç«¯ï¼Œå¹¶æ“¦é™¤å·¥ä½œè®°å¿†ï¼Œä»…ä¿ç•™åŸºå› ç§å­ç”¨äºè½¬ä¸–ã€‚)
* **Sleep & Consolidation (ç¡çœ ä¸å·©å›º)**: Implements **Synaptic Homeostasis (SHY)** to prevent catastrophic forgetting by rescaling weights during the "Night Phase". (å®æ–½çªè§¦ç¨³æ€å‡è¯´ï¼Œåœ¨â€œå¤œé—´é˜¶æ®µâ€é€šè¿‡é‡ç¼©æ”¾æƒé‡æ¥é˜²æ­¢ç¾éš¾æ€§é—å¿˜ã€‚)

### âš—ï¸ Neuro-Endocrine System (ç¥ç»å†…åˆ†æ³Œç³»ç»Ÿ)

* Simulates **Dopamine** (Reward/Creativity), **Norepinephrine** (Alertness/Fight-or-Flight), and **Cortisol** (Stress/Circadian) using **Ornstein-Uhlenbeck stochastic processes**.
* åˆ©ç”¨ **Ornstein-Uhlenbeck éšæœºè¿‡ç¨‹** æ¨¡æ‹Ÿ **å¤šå·´èƒº**ï¼ˆå¥–åŠ±/åˆ›é€ åŠ›ï¼‰ã€**å»ç”²è‚¾ä¸Šè…ºç´ **ï¼ˆè­¦è§‰/æˆ˜é€ƒï¼‰å’Œ **çš®è´¨é†‡**ï¼ˆå‹åŠ›/æ˜¼å¤œèŠ‚å¾‹ï¼‰ã€‚

### ğŸŒ‰ The Neural Bridge (ç¥ç»è„‘æ¡¥)

* A trainable VAE that translates biological signals (Spikes) into semantic vectors (Embeddings). This solves the grounding problem, allowing the LLM to understand "how it feels" physically.
* ä¸€ä¸ªå¯è®­ç»ƒçš„ VAEï¼Œå°†ç”Ÿç‰©è„‰å†²ä¿¡å·è½¬åŒ–ä¸ºè¯­ä¹‰å‘é‡ã€‚è¿™è§£å†³äº†ç¬¦å·è½åœ°é—®é¢˜ï¼Œè®© LLM èƒ½å¤Ÿç†è§£èº«ä½“çš„â€œæ„Ÿè§‰â€ã€‚

### ğŸ›¡ï¸ Recursive Immune System (é€’å½’å…ç–«ç³»ç»Ÿ)

* **Auto-Healing (è‡ªæ„ˆ)**: Upon runtime crash, Nezha introspects its own source code, generates a hot-fix patch via the LLM, and applies it in real-time without human intervention.
* **è‡ªæ„ˆæœºåˆ¶**: å½“å‘ç”Ÿè¿è¡Œæ—¶å´©æºƒæ—¶ï¼Œå“ªå’ä¼šå†…çœè‡ªèº«æºä»£ç ï¼Œé€šè¿‡ LLM ç”Ÿæˆçƒ­ä¿®å¤è¡¥ä¸ï¼Œå¹¶åœ¨æ— éœ€äººå·¥å¹²é¢„çš„æƒ…å†µä¸‹å®æ—¶åº”ç”¨ã€‚

### ğŸ“œ Constitutional Alignment (å®ªæ³•å¯¹é½)

* Unlike standard RLHF, Nezha uses a **Meta-Cognitive Constitution** during its recursive self-improvement (RSI). This prevents "Wireheading" (hedonistic traps) and ensures that its self-written code adheres to safety and altruistic principles.
* å“ªå’åœ¨é€’å½’è‡ªæˆ‘æ”¹è¿› (RSI) è¿‡ç¨‹ä¸­éµå¾ª **å…ƒè®¤çŸ¥å®ªæ³•**ï¼Œé˜²æ­¢â€œäº«ä¹ä¸»ä¹‰é™·é˜±â€å¹¶ç¡®ä¿å…¶è‡ªæˆ‘ç¼–å†™çš„ä»£ç ç¬¦åˆå®‰å…¨åŸåˆ™ã€‚

### âš›ï¸ Divine Synchronization (å½’ä¸€åŒæ­¥)

* **MoE Ascension (MoE é£å‡)**: When VRAM saturates and energy is abundant, the agent physically reconstructs itself from a Dense architecture into a **Mixture-of-Experts (MoE)** cluster using `mergekit`.
* **MoE é£å‡**: å½“æ˜¾å­˜é¥±å’Œä¸”èƒ½é‡å……ç›ˆæ—¶ï¼Œæ™ºèƒ½ä½“åˆ©ç”¨ `mergekit` å°†è‡ªèº«ä» Dense æ¶æ„ç‰©ç†é‡æ„ä¸º **æ··åˆä¸“å®¶æ¨¡å‹ (MoE)** é›†ç¾¤ã€‚

## ğŸš€ Quick Start (å¿«é€Ÿå¼€å§‹)

### Prerequisites (å‰ç½®è¦æ±‚)

* Python 3.10+
* NVIDIA GPU (24GB VRAM recommended for 4-bit loading / æ¨è 24GB æ˜¾å­˜ä»¥åŠ è½½ 4-bit æ¨¡å‹)

### Installation (å®‰è£…)

```bash
# 1. Clone the repository
git clone [https://github.com/waylliam1988/Nezha-AGI.git](https://github.com/waylliam1988/Nezha-AGI.git)
cd Nezha-AGI

# 2. Install dependencies
pip install -r requirements.txt

```

### Usage (ä½¿ç”¨æ–¹æ³•)

```bash
python Nezha.py

```

* **Interact (äº¤äº’)**: Type normally to chat. (æ­£å¸¸è¾“å…¥å¯¹è¯)
* **Commands (æŒ‡ä»¤)**:
* `sleep`: Trigger the night phase (Evolution & Memory Consolidation). (è§¦å‘ç¡çœ ï¼šè¿›åŒ–ä¸è®°å¿†å·©å›º)
* `feed`: Replenish ATP. (è¡¥å……èƒ½é‡)
* `good` / `bad`: Provide reinforcement feedback. (æä¾›å¼ºåŒ–åé¦ˆ)
* `PATCH: <code...>`: Inject a live Python patch. (æ³¨å…¥å®æ—¶ Python è¡¥ä¸)



## ğŸ“„ Documentation (æŠ€æœ¯æ–‡æ¡£)

For a deep dive into the mathematical and biological foundations (Free Energy Principle, STDP, Sortino Ratio), please refer to the **Technical Report**:
æ¬²æ·±å…¥äº†è§£æ•°å­¦ä¸ç”Ÿç‰©å­¦åŸºç¡€ï¼ˆè‡ªç”±èƒ½åŸç†ã€STDPã€ç´¢æè¯ºæ¯”ç‡ï¼‰ï¼Œè¯·å‚é˜… **æŠ€æœ¯æŠ¥å‘Š**ï¼š

ğŸ‘‰ **[Read the Full Technical Report (PDF)](./Nezha_Technical_Report_v11.0.pdf)**

## ğŸ¤ Citation (å¼•ç”¨)

If you use Nezha in your research, please cite it as follows:
å¦‚æœæ‚¨åœ¨ç ”ç©¶ä¸­ä½¿ç”¨äº† Nezhaï¼Œè¯·æŒ‰å¦‚ä¸‹æ ¼å¼å¼•ç”¨ï¼š

```bibtex
@software{nezha_agi_2025,
  author = {Liu, Yanwei},
  title = {Nezha: An Evolving AGI Prototype Integrating Active Inference and SNN},
  version = {11.0},
  year = {2025},
  publisher = {Zenodo},
  doi = {10.5281/zenodo.PLEASE_UPDATE_AFTER_RELEASE},
  url = {[https://github.com/waylliam1988/Nezha-AGI](https://github.com/waylliam1988/Nezha-AGI)}
}

```

## ğŸ“œ License

This project is licensed under the Apache License 2.0 - see the [LICENSE](LICENSE) file for details.

```